WARNING: You are currently using Node.js v21.7.3, which is not supported by Hardhat. This can lead to unexpected behavior. See https://hardhat.org/nodejs-versions




  ๐๐๐๏ธ Prediction Markets Challenge
    Checkpoint2
      โ Should revert when no ETH is provided for initial liquidity (69ms)
      โ Should revert when initialYesProbability is 0 or >= 100 (74ms)
      โ Should revert when percentageToLock is >= 100 or 0 (70ms)
      โ Should set the correct state variables on deployment (120ms)
    Checkpoint3
      โ Should correctly calculate initial token amounts (140ms)
      1) Should correctly transfer locked tokens to deployer
    Checkpoint4
      โ Should successfully add liquidity, mint tokens and update state variables (123ms)
      2) Should revert when trying to remove more tokens than available
      3) Should successfully remove liquidity, burn tokens and update state variables
      โ Should emit correct events when adding and removing liquidity (108ms)
    Checkpoint5
      โ Should revert when trying to add liquidity after prediction is reported
      โ Should revert when trying to remove liquidity after prediction is reported (68ms)
      โ Should revert when trying to report after prediction is reported (63ms)
      โ Should revert when trying to report when not called by the s_oracle (58ms)
      โ Should correctly set winning token and isReported flag when reporting (110ms)
      โ Should emit correct MarketReported event when reporting (105ms)
    Checkpoint6
      โ Should revert when trying to resolve before prediction is reported (58ms)
      โ Should correctly resolve market and withdraw ETH (102ms)
      โ Should send exact totalEthToSend amount to msg.sender (86ms)
    Checkpoint7
      4) Should correctly calculate buy price in ETH
      5) Should correctly calculate sell price in ETH
      6) Should revert when trying to buy more tokens than available in reserve
      โ Should correctly calculate probability for different token amounts (99ms)
      โ Should correctly get current reserves for both YES and NO outcomes (46ms)
      โ Should correctly calculate probability with edge cases
    Checkpoint8
      7) Should revert when trying to buy tokens with zero amount
      8) Should revert when trying to sell tokens with zero amount
      9) Should revert when trying to buy tokens with incorrect ETH amount
      โ Should successfully buy tokens with ETH
      โ Should successfully sell tokens for ETH (38ms)
      โ Should revert when trying to sell more tokens than owned
      โ Should revert when trying to sell tokens without approval
      โ Should emit correct events when buying and selling tokens
      โ Should revert when trying to buy tokens after prediction is reported
      โ Should revert when trying to sell tokens after prediction is reported
      โ Owner cannot buy or sell tokens (42ms)
    Checkpoint9
      โ Should revert when trying to redeem before prediction is reported (39ms)
      โ Should revert when trying to redeem more tokens than owned
      โ Should revert when trying to redeem zero tokens
      โ Should successfully redeem winning tokens and receive ETH (43ms)
      โ Should emit correct WinningTokensRedeemed event
      โ Owner cannot redeem tokens


  33 passing (3s)
  9 failing

  1) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint3
         Should correctly transfer locked tokens to deployer:

      AssertionError: expected 90000000000000000000 to equal 12000000000000000000.
      + expected - actual

      -90000000000000000000
      +12000000000000000000
      
      at Context.<anonymous> (test/PredictionMarket.ts:214:58)

  2) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint4
         Should revert when trying to remove more tokens than available:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__InsufficientTokenReserve', but it reverted with custom error 'PredictionMarket__InsufficientLiquidity'
      at async Context.<anonymous> (test/PredictionMarket.ts:273:7)

  3) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint4
         Should successfully remove liquidity, burn tokens and update state variables:
     Error: VM Exception while processing transaction: reverted with custom error 'PredictionMarket__InsufficientTokenReserve(0, 5000000000000000000)'
    at PredictionMarket.removeLiquidity (contracts/PredictionMarket.sol:192)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:397:41)
    at async HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at async send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at async Proxy.removeLiquidity (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at async Context.<anonymous> (test/PredictionMarket.ts:302:7)
  

  4) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint7
         Should correctly calculate buy price in ETH:

      AssertionError: expected 500000000000000000 to equal 514705882352941176.
      + expected - actual

      -500000000000000000
      +514705882352941176
      
      at Context.<anonymous> (test/PredictionMarket.ts:717:27)

  5) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint7
         Should correctly calculate sell price in ETH:

      AssertionError: expected 500000000000000000 to equal 483333333333333333.
      + expected - actual

      -500000000000000000
      +483333333333333333
      
      at Context.<anonymous> (test/PredictionMarket.ts:762:28)

  6) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint7
         Should revert when trying to buy more tokens than available in reserve:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__InsufficientLiquidity', but it didn't revert
      at async Context.<anonymous> (test/PredictionMarket.ts:787:7)

  7) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint8
         Should revert when trying to buy tokens with zero amount:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__AmountMustBeGreaterThanZero', but it reverted with custom error 'PredictionMarket__OwnerCannotCall'
      at async Context.<anonymous> (test/PredictionMarket.ts:969:7)

  8) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint8
         Should revert when trying to sell tokens with zero amount:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__AmountMustBeGreaterThanZero', but it reverted with custom error 'PredictionMarket__OwnerCannotCall'
      at async Context.<anonymous> (test/PredictionMarket.ts:989:7)

  9) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint8
         Should revert when trying to buy tokens with incorrect ETH amount:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__MustSendExactETHAmount', but it didn't revert
      at async Context.<anonymous> (test/PredictionMarket.ts:1018:7)



ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mSolidity and Network Configuration[22m[39m                                                                                โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [36mSolidity: 0.8.20[39m              ยท  [36mOptim: true[39m    ยท  [36mRuns: 200[39m    ยท  [36mviaIR: true[39m    ยท     [36mBlock: 30,000,000 gas[39m     โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mMethods[22m[39m                                                                                                           โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mContracts / Methods[22m[39m           ยท  [1mMin[22m            ยท  [1mMax[22m          ยท  [1mAvg[22m            ยท  [1m# calls[22m       ยท  [1musd (avg)[22m   โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [1mPredictionMarket[22m              ยท                                                                                   โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      addLiquidity              ยท              [90m-[39m  ยท            [90m-[39m  ยท         73,950  ยท             6  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      buyTokensWithETH          ยท         [36m80,319[39m  ยท       [31m87,288[39m  ยท         81,016  ยท            10  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      redeemWinningTokens       ยท              [90m-[39m  ยท            [90m-[39m  ยท         55,497  ยท             4  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      removeLiquidity           ยท              [90m-[39m  ยท            [90m-[39m  ยท         83,402  ยท             2  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      report                    ยท         [36m49,822[39m  ยท       [31m49,846[39m  ยท         49,826  ยท            18  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      resolveMarketAndWithdraw  ยท              [90m-[39m  ยท            [90m-[39m  ยท         55,031  ยท             4  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      sellTokensForEth          ยท              [90m-[39m  ยท            [90m-[39m  ยท         67,188  ยท             4  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [1mPredictionMarketToken[22m         ยท                                                                                   โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      approve                   ยท              [90m-[39m  ยท            [90m-[39m  ยท         45,981  ยท             4  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mDeployments[22m[39m                                     ยท                                 ยท  [1m% of limit[22m    ยท              โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [1mPredictionMarket[22m              ยท      [36m3,047,144[39m  ยท    [31m3,069,605[39m  ยท      3,048,789  ยท        10.2 %  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mKey[22m[39m                                                                                                               โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [35m[1mโฏ[22m[39m  Execution gas for this method does not include intrinsic gas overhead                                          โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [35m[1mโณ[22m[39m  Cost was non-zero but below the precision setting for the currency display (see options)                       โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [35mToolchain:[39m  hardhat                                                                                               โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
