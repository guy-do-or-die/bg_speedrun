WARNING: You are currently using Node.js v21.7.3, which is not supported by Hardhat. This can lead to unexpected behavior. See https://hardhat.org/nodejs-versions




  ๐๐๐๏ธ Prediction Markets Challenge
    Checkpoint2
      โ Should revert when no ETH is provided for initial liquidity
      1) Should revert when initialYesProbability is 0 or >= 100
      2) Should revert when percentageToLock is >= 100 or 0
      โ Should set the correct state variables on deployment (58ms)
    Checkpoint3
      โ Should correctly calculate initial token amounts (64ms)
      3) Should correctly transfer locked tokens to deployer
    Checkpoint4
      โ Should successfully add liquidity, mint tokens and update state variables (46ms)
      4) Should revert when trying to remove more tokens than available
      โ Should successfully remove liquidity, burn tokens and update state variables (47ms)
      โ Should emit correct events when adding and removing liquidity (53ms)
    Checkpoint5
      โ Should revert when trying to add liquidity after prediction is reported
      โ Should revert when trying to remove liquidity after prediction is reported
      โ Should revert when trying to report after prediction is reported
      โ Should revert when trying to report when not called by the s_oracle
      โ Should correctly set winning token and isReported flag when reporting (51ms)
      โ Should emit correct MarketReported event when reporting (44ms)
    Checkpoint6
      โ Should revert when trying to resolve before prediction is reported
      โ Should correctly resolve market and withdraw ETH (43ms)
      โ Should send exact totalEthToSend amount to msg.sender
    Checkpoint7
      5) Should correctly calculate buy price in ETH
      6) Should correctly calculate sell price in ETH
      7) Should revert when trying to buy more tokens than available in reserve
      โ Should correctly calculate probability for different token amounts (58ms)
      โ Should correctly get current reserves for both YES and NO outcomes
      โ Should correctly calculate probability with edge cases
    Checkpoint8
      8) Should revert when trying to buy tokens with zero amount
      9) Should revert when trying to sell tokens with zero amount
      10) Should revert when trying to buy tokens with incorrect ETH amount
      โ Should successfully buy tokens with ETH
      โ Should successfully sell tokens for ETH
      โ Should revert when trying to sell more tokens than owned
      โ Should revert when trying to sell tokens without approval
      โ Should emit correct events when buying and selling tokens
      โ Should revert when trying to buy tokens after prediction is reported
      โ Should revert when trying to sell tokens after prediction is reported
      11) Owner cannot buy or sell tokens
    Checkpoint9
      โ Should revert when trying to redeem before prediction is reported
      โ Should revert when trying to redeem more tokens than owned
      12) Should revert when trying to redeem zero tokens
      โ Should successfully redeem winning tokens and receive ETH (39ms)
      โ Should emit correct WinningTokensRedeemed event
      13) Owner cannot redeem tokens


  29 passing (2s)
  13 failing

  1) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint2
         Should revert when initialYesProbability is 0 or >= 100:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__InvalidProbability', but it didn't revert
      at async Context.<anonymous> (test/PredictionMarket.ts:56:7)

  2) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint2
         Should revert when percentageToLock is >= 100 or 0:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__InvalidPercentageToLock', but it didn't revert
      at async Context.<anonymous> (test/PredictionMarket.ts:87:7)

  3) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint3
         Should correctly transfer locked tokens to deployer:

      AssertionError: expected 0 to equal 12000000000000000000.
      + expected - actual

      -0
      +12000000000000000000
      
      at Context.<anonymous> (test/PredictionMarket.ts:214:58)

  4) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint4
         Should revert when trying to remove more tokens than available:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__InsufficientTokenReserve', but it reverted with custom error 'PredictionMarket__InsufficientLiquidity'
      at async Context.<anonymous> (test/PredictionMarket.ts:273:7)

  5) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint7
         Should correctly calculate buy price in ETH:
     RangeError: Division by zero
      at Context.<anonymous> (test/PredictionMarket.ts:707:69)

  6) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint7
         Should correctly calculate sell price in ETH:
     RangeError: Division by zero
      at Context.<anonymous> (test/PredictionMarket.ts:752:69)

  7) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint7
         Should revert when trying to buy more tokens than available in reserve:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__InsufficientLiquidity', but it didn't revert
      at async Context.<anonymous> (test/PredictionMarket.ts:787:7)

  8) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint8
         Should revert when trying to buy tokens with zero amount:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__AmountMustBeGreaterThanZero', but it didn't revert
      at async Context.<anonymous> (test/PredictionMarket.ts:969:7)

  9) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint8
         Should revert when trying to sell tokens with zero amount:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__AmountMustBeGreaterThanZero', but it reverted with a different custom error
      at async Context.<anonymous> (test/PredictionMarket.ts:989:7)

  10) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint8
         Should revert when trying to buy tokens with incorrect ETH amount:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__MustSendExactETHAmount', but it didn't revert
      at async Context.<anonymous> (test/PredictionMarket.ts:1018:7)

  11) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint8
         Owner cannot buy or sell tokens:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__OwnerCannotCall', but it didn't revert
      at async Context.<anonymous> (test/PredictionMarket.ts:1307:7)

  12) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint9
         Should revert when trying to redeem zero tokens:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__AmountMustBeGreaterThanZero', but it didn't revert
      at async Context.<anonymous> (test/PredictionMarket.ts:1381:7)

  13) ๐๐๐๏ธ Prediction Markets Challenge
       Checkpoint9
         Owner cannot redeem tokens:
     AssertionError: Expected transaction to be reverted with custom error 'PredictionMarket__OwnerCannotCall', but it reverted with custom error 'PredictionMarket__InsufficientWinningTokens'
      at async Context.<anonymous> (test/PredictionMarket.ts:1495:7)



ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mSolidity and Network Configuration[22m[39m                                                                                โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [36mSolidity: 0.8.20[39m              ยท  [36mOptim: true[39m    ยท  [36mRuns: 200[39m    ยท  [36mviaIR: true[39m    ยท     [36mBlock: 30,000,000 gas[39m     โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mMethods[22m[39m                                                                                                           โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mContracts / Methods[22m[39m           ยท  [1mMin[22m            ยท  [1mMax[22m          ยท  [1mAvg[22m            ยท  [1m# calls[22m       ยท  [1musd (avg)[22m   โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [1mPredictionMarket[22m              ยท                                                                                   โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      addLiquidity              ยท              [90m-[39m  ยท            [90m-[39m  ยท         73,950  ยท             6  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      buyTokensWithETH          ยท         [36m59,475[39m  ยท       [31m85,047[39m  ยท         77,101  ยท            12  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      redeemWinningTokens       ยท         [36m42,985[39m  ยท       [31m53,357[39m  ยท         51,283  ยท             5  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      removeLiquidity           ยท              [90m-[39m  ยท            [90m-[39m  ยท         83,397  ยท             3  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      report                    ยท         [36m49,822[39m  ยท       [31m49,846[39m  ยท         49,826  ยท            18  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      resolveMarketAndWithdraw  ยท              [90m-[39m  ยท            [90m-[39m  ยท         47,865  ยท             4  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      sellTokensForEth          ยท              [90m-[39m  ยท            [90m-[39m  ยท         65,054  ยท             4  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [1mPredictionMarketToken[22m         ยท                                                                                   โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|      approve                   ยท         [36m45,969[39m  ยท       [31m45,981[39m  ยท         45,978  ยท             4  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mDeployments[22m[39m                                     ยท                                 ยท  [1m% of limit[22m    ยท              โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [1mPredictionMarket[22m              ยท      [36m2,940,548[39m  ยท    [31m2,982,921[39m  ยท      2,961,591  ยท         9.9 %  ยท           [32m[90m-[39m[32m[39m  โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท|ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [32m[1mKey[22m[39m                                                                                                               โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [35m[1mโฏ[22m[39m  Execution gas for this method does not include intrinsic gas overhead                                          โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [35m[1mโณ[22m[39m  Cost was non-zero but below the precision setting for the currency display (see options)                       โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
|  [35mToolchain:[39m  hardhat                                                                                               โ
ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทยท
